# プロンプト分類ツール - macOS版 使い方

## 📱 対応環境

- **macOS 11 Big Sur 以降**
- **Intel Mac / Apple Silicon (M1/M2/M3/M4) 両対応**

---

## 🚀 初回起動方法

### ⚠️ 重要：初回起動時の手順

macOSのセキュリティ機能（Gatekeeper）により、初回起動時は特別な手順が必要です。

**手順**：
1. ZIPファイルを解凍
2. **「プロンプト分類ツール.app」を右クリック**
3. **「開く」を選択**
4. 「開発元を確認できません」と表示されたら、**「開く」ボタンをクリック**

![macOS 初回起動](https://support.apple.com/library/content/dam/edam/applecare/images/ja_JP/macos/macos-ventura-right-click-open-unidentified-app.png)

### 以降の起動

初回起動後は、通常通り**ダブルクリック**で起動できます。

---

## 💡 使い方

基本的な使い方はWindows版と同じです。

### モードA: YAML生成（StabilityMatrix ワイルドカード形式）

1. **「Mode A: YAML生成」を選択**
2. **「ファイルを選択」**ボタンをクリック
   - 単一ファイル：通常通りクリック
   - 複数ファイル：**⌘（Command）キー**を押しながら複数選択
   - 範囲選択：**Shift キー**を押しながら選択
3. **「実行」**ボタンをクリック
4. プレビューで結果を確認
5. **「ファイルに保存」**または**「クリップボードにコピー」**

**出力例**：
```yaml
character_main:
  - "1girl, solo, __characterface__, __characterbody__, __clothing__, __poseemotion__, __backgrounds__, __uncategorized__"

characterface:
  - "long hair, blue eyes"
  - "short hair, red eyes"
  ...
```

### モードB: テキスト抽出（Stable Diffusion "Prompts from file" 用）

1. **「Mode B: テキスト抽出」を選択**
2. **「フォルダを選択」**ボタンをクリック
3. **カテゴリを選択**（複数選択可能）
   - ✓ 顔（髪型・目・前髪・髪の特徴等）
   - ✓ 服装（衣類・アクセサリー・靴・職業装束等）
   - ✓ ポーズ・表情（姿勢・動作・表情・アングル等）
   - ✓ 背景（場所・環境・シーン等）
   - ✓ 体の特徴（年齢・性別・体型・露出状態等）
4. **「実行」**ボタンをクリック
5. プレビューで結果を確認
6. **「ファイルに保存」**または**「クリップボードにコピー」**

**出力形式**：
```
long hair, blue eyes, smile, school uniform, classroom, large breasts
short hair, red eyes, angry, bikini, beach, small breasts
...
```

---

## 🎯 分類カテゴリ（合計1272キーワード）

| カテゴリ | キーワード数 | 内容 |
|---------|------------|------|
| 顔 | 105 | 髪型、前髪、髪の特徴、目の色、髪色、唇の装飾 |
| 服装 | 345 | 服、アクセサリー、靴、下着、職業装束、制服、動物着ぐるみ |
| ポーズ・表情 | 601 | 姿勢、動作、表情（口・歯・舌）、感情、アングル・視点、戦闘・アクション |
| 背景 | 87 | 場所、環境、シーン、天体、自然、小道具 |
| 体の特徴 | 134 | 年齢・性別、人数、露出状態、体型、肌の色、胸部の詳細 |

---

## 📁 サンプルファイル

配布パッケージには3つのサンプルファイルが含まれています：

- **sample_prompt_001.txt** - 基本的なサンプル（髪型、服装、表情、場所）
- **sample_prompt_002.txt** - ポーズ・視線のサンプル
- **sample_prompt_003.txt** - ハロウィン・NSFW表現のサンプル

---

## 🔧 トラブルシューティング

### Q: 「開発元を確認できません」エラーが出る
**A**: 右クリック→「開く」で回避できます。初回のみ必要な手順です。

### Q: ダブルクリックで起動できない
**A**: 初回は必ず右クリック→「開く」を使用してください。

### Q: ファイルを複数選択できない
**A**: ⌘（Command）キーを押しながらクリックで複数選択できます。

### Q: 日本語が文字化けする
**A**: macOS 11以降では自動的にUTF-8エンコーディングが使用されます。古いOSの場合はアップデートをご検討ください。

### Q: アプリが起動しない・クラッシュする
**A**:
1. ターミナルで直接実行してエラー確認：
   ```bash
   ./プロンプト分類ツール.app/Contents/MacOS/プロンプト分類ツール
   ```
2. Console.app（コンソールアプリ）でログ確認
3. macOSのバージョンを確認（macOS 11以降が必要）

### Q: 保存したファイルが見つからない
**A**: Finderの「最近使った項目」または検索（⌘+Space）で探せます。

---

## 📋 キーボードショートカット

| ショートカット | 動作 |
|--------------|------|
| ⌘ + A | ファイル選択ダイアログで全選択 |
| ⌘ + C | クリップボードにコピー |
| ⌘ + S | ファイルに保存 |
| ⌘ + Q | アプリ終了 |

---

## 🆘 サポート

問題が発生した場合：
1. このドキュメントの「トラブルシューティング」セクションを確認
2. サンプルファイルで動作確認
3. GitHubのIssueで報告（該当する場合）

---

## 📝 更新履歴

### v1.0 (2025-10-26)
- 初回リリース
- Universal Binary対応（Intel + Apple Silicon）
- 1272キーワード対応
- StabilityMatrix完全互換

---

**バージョン**: 1.0
**対応macOS**: macOS 11 Big Sur 以降
**最終更新**: 2025-10-26
